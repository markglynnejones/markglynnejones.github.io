<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Commander Wins Tracker</title>
    <link rel="stylesheet" href="styles.css" />
  </head>

  <body>
    <header>
      <h1>Commander Wins Tracker</h1>
    </header>

    <nav class="tabs" role="tablist" aria-label="Year tabs">
      <button
        type="button"
        class="tab"
        role="tab"
        id="tab-overall"
        aria-selected="true"
        aria-controls="panel-overall"
        tabindex="0"
        data-tab="overall"
      >
        Overall
      </button>

      <button
        type="button"
        class="tab"
        role="tab"
        id="tab-2025"
        aria-selected="false"
        aria-controls="panel-2025"
        tabindex="-1"
        data-tab="2025"
      >
        2025
      </button>

      <button
        type="button"
        class="tab"
        role="tab"
        id="tab-2026"
        aria-selected="false"
        aria-controls="panel-2026"
        tabindex="-1"
        data-tab="2026"
      >
        2026
      </button>
    </nav>

    <main id="tab-panel" role="tabpanel" aria-labelledby="tab-overall">
      <section>
        <h2 style="text-align: center;">Singles Wins Table</h2>

        <table id="singles-table">
          <thead>
            <tr>
              <th
                id="sort-player"
                class="sortable"
                scope="col"
                role="button"
                tabindex="0"
              >
                Player <span id="arrow-player"></span>
              </th>
              <th
                id="sort-wins-singles"
                class="sortable"
                scope="col"
                role="button"
                tabindex="0"
              >
                Total Wins <span id="arrow-wins-singles"></span>
              </th>
              <th
                id="sort-matches-singles"
                class="sortable"
                scope="col"
                role="button"
                tabindex="0"
              >
                Matches Played <span id="arrow-matches-singles"></span>
              </th>
              <th
                id="sort-winrate-singles"
                class="sortable"
                scope="col"
                role="button"
                tabindex="0"
              >
                Win Rate <span id="arrow-winrate-singles"></span>
              </th>
            </tr>
          </thead>

          <tbody id="wins-table-body"></tbody>
        </table>
      </section>

      <!-- NEW: Player deck stats -->
      <section>
        <h2 style="text-align: center;">Player Deck Stats (2026 match log)</h2>

        <div
          style="
            width: 80%;
            margin: 0 auto 12px auto;
            display: flex;
            gap: 12px;
            align-items: center;
            justify-content: center;
            flex-wrap: wrap;
          "
        >
          <label for="player-deck-select"><strong>Player:</strong></label>
          <select id="player-deck-select">
            <option value="">Loadingâ€¦</option>
          </select>

          <span id="player-deck-note" style="opacity: 0.8;"></span>
        </div>

        <table id="player-decks-table">
          <thead>
            <tr>
              <th>Deck</th>
              <th>Wins</th>
              <th>Matches</th>
              <th>Win Rate</th>
            </tr>
          </thead>
          <tbody id="player-decks-body"></tbody>
        </table>
      </section>

      <!-- NEW: Wins over time chart -->
      <section>
        <h2 style="text-align: center;">Wins Over Time (2026 match log)</h2>

        <div
          style="
            width: 80%;
            margin: 0 auto 12px auto;
            text-align: center;
            opacity: 0.85;
          "
        >
          <span id="wins-over-time-note"></span>
        </div>

        <div id="wins-over-time-chart" style="width: 80%; margin: 0 auto 24px auto;"></div>
      </section>

      <section>
        <h2 style="text-align: center;">Decks Played</h2>

        <button
          id="toggle-inactive-decks"
          type="button"
          aria-controls="decks-table"
          aria-pressed="false"
        >
          Hide Inactive Decks
        </button>

        <table id="decks-table">
          <thead>
            <tr>
              <th
                id="sort-deck-name"
                class="sortable"
                scope="col"
                role="button"
                tabindex="0"
              >
                Deck Name <span id="arrow-sort-deck-name"></span>
              </th>
              <th scope="col">Commander</th>
              <th scope="col">Colours</th>
              <th scope="col">Combinations</th>
              <th
                id="sort-wins"
                class="sortable"
                scope="col"
                role="button"
                tabindex="0"
              >
                Wins <span id="arrow-sort-wins"></span>
              </th>
              <th
                id="sort-matches"
                class="sortable"
                scope="col"
                role="button"
                tabindex="0"
              >
                Matches Played <span id="arrow-sort-matches"></span>
              </th>
              <th
                id="sort-winrate"
                class="sortable"
                scope="col"
                role="button"
                tabindex="0"
              >
                Win Percentage <span id="arrow-sort-winrate"></span>
              </th>
              <th scope="col">Image</th>
              <th scope="col">Active</th>
            </tr>
          </thead>

          <tbody id="decks-table-body"></tbody>
        </table>
      </section>
    </main>

    <footer>
      <p>Magic: The Gathering - Commander Wins Tracker</p>
    </footer>

    <script src="scripts.js"></script>
  </body>
</html>
